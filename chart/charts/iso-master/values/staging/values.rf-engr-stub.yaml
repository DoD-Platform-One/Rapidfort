env:
  vmpool_server_addr: "internal-rf-engr-internal-597658398.us-east-1.elb.amazonaws.com"
  security_group_id: "sg-0aee0ef548fb013ab"
  vpc_subnet_id: "subnet-05d00df7f7ea3a017"
  redis_host_ha: "rfv-db-redis-cluster-master"
  redis_pwd_ha: "hmAQOQfz3O"

affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
      - matchExpressions:
        - key: node-type
          operator: In
          values:
          - storageOptimized

resources:
  requests:
    cpu: 1
    memory: 1024Mi

livenessProbe:
  failureThreshold: 3

readinessProbe:
  failureThreshold: 3

pvc:
  image_db: "rf-engr-staging-image-db"
  package_analyzer_db: "rf-engr-staging-package-analyzer-db"

volumes:
  - name: fuse
    hostPath:
      path: /dev/fuse
  - name: dockersock
    hostPath:
      path: /var/run/docker.sock
  - name: imgs-work-dir
    hostPath:
      path: /imgs-work-dir
      type: DirectoryOrCreate
  - name: package-analyzer-db-pvc
    persistentVolumeClaim:
      claimName: "{{ .Values.pvc.package_analyzer_db }}"
  - name: image-db-pvc
    persistentVolumeClaim:
      claimName: "{{ .Values.pvc.image_db }}"
  - name: vulns-db
    hostPath:
      path: /opt/rapidfort/data/iso-master/vulns_db
  # - name: env
  #   configMap:
  #     name: rf-version-info
volumeMounts:
  - name: fuse
    mountPath: "/dev/fuse"
  - name: dockersock
    mountPath: "/var/run/docker.sock"
  - name: imgs-work-dir
    mountPath: "/opt/rapidfort/iso-master/app/imgs_work_dir"
  - name: package-analyzer-db-pvc
    mountPath: "/opt/rapidfort/iso-master/app/package-analyzer-db"
  - name: image-db-pvc
    mountPath: "/opt/rapidfort/iso-master/app/image_db"
  - name: vulns-db
    mountPath: "/opt/rapidfort/iso-master/app/db"
  # - name: env
  #   mountPath: "/opt/rapidfort/.env"

global:
  rf_app_host: "frontrow.rapidfort.io"

securityContext:
  allowPrivilegeEscalation: true
  capabilities:
    drop:
      - ALL
    add:
      - SYS_ADMIN
      - SYS_PTRACE